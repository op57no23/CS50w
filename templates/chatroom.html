{% extends 'layout.html' %}

{% block body %}
<div class="container">
		<div class="row md-auto">
				<h2>Welcome to the chatroom <span id = "username">{{username}}</span>!<h2> <br>
				<h3>Select or create a channel and start chatting.</h3>
		</div>
		<div class="row" id = "messageWindow">
				<div class="col-sm-2">
						<div class="list-group" id = "listgroup">
								{% for channel in channels.keys() %}
								<button class="list-group-item list-group-item-action" id = "{{channel}}" type = "button">{{channel}}</button>

								{% endfor %}
								<button class="list-group-item list-group-item-action" type = "button" id = "add_new_channel" data-toggle= "modal" data-target="#Modal">Add a new channel</button>
						</div>	

				</div>
				{% for channel in channels.keys() %}
				<div class="col-sm-10" id = {{channel + "messages"}} style = "display: none">
						{% for m in channels[channel] %}
						<div class="row">
								{% if m.user == username %}
								<div class="col-6">
								</div>
								<div class="col-6">
										<small>{{m.user}} at {{m.time}}</small><br>{{m.message}}
								</div>

								{% else %}
								<div class="col-6">
										<small>{{m.user}} at {{m.time}}</small><br>{{m.message}}
								</div>
								<div class="col-6"></div>
								{% endif %}
						</div>
						{% endfor %}
				</div>
				{% endfor %}
		</div>
		<div class="row">
				<div class="col-sm-2">
				</div>				
				<div class="col-sm-10">
						<form> 
								<input type="text" class = "form-control" id = "message_input">
								<button type = "button" id = "send_message" class = "btn btn-primary">Send</button>
						</form>
				</div>
		</div>
		<div class="modal fade" id = "Modal">
				<div class="modal-dialog" role = "document">
						<div class="modal-content">
								<div class="modal-header">
										<h5 class="modal-title" id="exampleModalLabel">Create a Channel</h5>
										<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
										</button>
								</div>
								<div class="modal-body">
										<form>
												<div class="form-group">
														<label for="channel_name" class="col-form-label">Channel Name</label>
														<input type="text" class="form-control" id="channel_name">
												</div>
										</form>
								</div>
								<div class="modal-footer">
										<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
										<button type="button" class="btn btn-primary" data-dismiss = "modal" id = "create_channel">Create</button>
								</div>
						</div>

				</div>
		</div>
</div>
{% endblock %}
